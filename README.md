# Руководство
Получение кол-ва свободных мест на парковке.

# Принцип работы

На вход поступает id станции и ссылка на изобржение.
Происходит выбор необохдимой разметки камеры. Затем происходит обнаружение объектов при помощи YOLOv8.<br>
**YOLOv8** - это новейшее семейство моделей обнаружения объектов на базе YOLO от Ultralytics, обеспечивающих самые современные характеристики.<br>
В рамке станции происходит поиск людей.<br>
В рамке парковки обнаруживаются машины. Если машины занимают более 20% парковочного места, то парковка считается занятой.

# Запуск

Запуск происходит при помощи docker-compose.
```
docker-compose up --build -d
```


# Входные данные
На вход программа получает из POST запроса по адресу /api/parking следующие данные:<br>
- `parking` - парковка.

# Выходные данные

## Успешный ответ
При успешном нахождении мест возвращает сообщение следующего вида:

```
{
    "free": N,
}
```
где<br>
`N` - кол-во свободных мест,<br>

## Ответ с ошибкой

Если ответ не удалось получить, то возвращается сообщение следующего вида:
```
{
    "errorCode": N
}
```
где ``N`` - код ошибки.

### Возможные коды ошибок:

- `1` - отсутствует файл с данными о парковочных местах для данной станции.
# Использованные материалы

О YOLOv8: https://habr.com/ru/articles/710016/ <br>
Обнаружение при помощи YOLOv8: https://github.com/freedomwebtech/yolov8parkingspace <br>
Rest API на Flask: https://pythonist.ru/rest-api-na-python-s-flask-connexion-i-sqlalchemy-chast-1/#init <br>
Опредление процента занятой области: https://shapely.readthedocs.io/en/stable/manual.html#Polygon, https://shapely.readthedocs.io/en/stable/manual.html#object.difference